
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾è¯¾é•¿AIæ•°å­—èµ„äº§ | çˆ†æ¬¾æ ‡é¢˜å•†ä¸šèåˆç‰ˆ</title>
    <style>
        :root {
            /* èåˆé…è‰²ï¼šé«˜ç«¯å•†åŠ¡ç™½ + æ‹¼å¤šå¤šçº¢ + éé‡‘ */
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --primary-red: #e02e24;
            --gradient-red: linear-gradient(135deg, #e02e24 0%, #ff5c5c 100%);
            --text-main: #2c3e50;
            --text-sub: #7f8c8d;
            --gold-accent: #d4a017;
            --shadow-soft: 0 10px 30px rgba(0,0,0,0.08);
            --shadow-hover: 0 15px 40px rgba(224, 46, 36, 0.15);
        }

        body {
            margin: 0;
            padding: 40px 20px;
            font-family: 'PingFang SC', 'Helvetica Neue', 'Microsoft YaHei', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* ==================== 
           èåˆç‰ˆæ°´å°ï¼šè½»å¥¢é“¶ç° + å€¾æ–œé˜²ä¼ªé£æ ¼
           ==================== */
        .watermark-layer {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            z-index: 0;
            pointer-events: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            align-content: space-around;
            transform: rotate(-30deg);
            opacity: 0.06; /* ææ·¡ï¼Œä¸å¹²æ‰°é˜…è¯» */
        }
        .watermark-item {
            flex: 0 0 auto;
            margin: 60px 80px;
            font-size: 15px;
            font-weight: 600;
            color: #000;
            text-align: center;
            line-height: 1.8;
            font-family: 'Georgia', serif; /* å¢åŠ ä¸€ç‚¹è¡¬çº¿æ„Ÿçš„å•†ä¸šæ°”æ¯ */
        }

        /* ä¸»å®¹å™¨ */
        .container {
            position: relative;
            z-index: 10;
            max-width: 900px; /* åŠ å®½ */
            margin: 0 auto;
        }

        /* å¤´éƒ¨ï¼šä¿ç•™V4çš„æ ‡ç­¾å“²å­¦ï¼Œä½¿ç”¨V5çš„å¤§æ°”æ’ç‰ˆ */
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        .header h1 {
            font-size: 34px;
            font-weight: 800;
            color: var(--text-main);
            margin: 0 0 15px 0;
            letter-spacing: 1px;
        }
        .header .badges {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .badge {
            background: #fff;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 13px;
            color: var(--text-sub);
            border: 1px solid #e1e1e1;
            box-shadow: 0 2px 5px rgba(0,0,0,0.03);
            font-weight: 600;
        }
        .badge.gold { border-color: var(--gold-accent); color: #b7890b; }

        /* é…ç½®åŒºï¼šéšè”½ä½†æ˜“ç”¨ */
        .config-wrap {
            background: #fff;
            border-radius: 12px;
            margin-bottom: 30px;
            overflow: hidden;
            box-shadow: var(--shadow-soft);
        }
        .config-header {
            padding: 15px 20px;
            background: #f8f9fa;
            cursor: pointer;
            font-size: 14px;
            color: var(--primary-red);
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .config-body {
            display: none;
            padding: 20px;
            border-top: 1px solid #eee;
        }
        .config-input {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            box-sizing: border-box;
            background: #fcfcfc;
        }

        /* æ ¸å¿ƒè¾“å…¥å¡ç‰‡ï¼šèåˆ V5çš„å¤§å°ºå¯¸ + V4çš„è´¨æ„Ÿ */
        .main-card {
            background: var(--card-bg);
            border-radius: 24px;
            padding: 40px;
            box-shadow: var(--shadow-soft);
            transition: transform 0.3s;
            border: 1px solid rgba(0,0,0,0.03);
        }
        .main-card:hover {
            box-shadow: var(--shadow-hover);
            transform: translateY(-2px);
        }

        .input-label {
            font-size: 24px; /* å…³çˆ±ç‰ˆçš„å¤§å­—å· */
            font-weight: 700;
            color: var(--text-main);
            margin-bottom: 20px;
            display: block;
        }
        
        textarea#productInput {
            width: 100%;
            height: 160px;
            padding: 25px;
            font-size: 26px; /* èåˆç‰ˆå¤§å­—ä½“ */
            border: 2px solid #eef0f5;
            border-radius: 16px;
            background: #fcfdfe;
            resize: none;
            outline: none;
            box-sizing: border-box;
            color: #333;
            transition: 0.3s;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.02);
        }
        textarea#productInput:focus {
            border-color: var(--primary-red);
            background: #fff;
            box-shadow: 0 0 0 4px rgba(224, 46, 36, 0.1);
        }

        button#generateBtn {
            width: 100%;
            margin-top: 30px;
            padding: 20px;
            background: var(--gradient-red);
            color: white;
            font-size: 24px;
            font-weight: bold;
            border: none;
            border-radius: 50px; /* å…¨åœ†è§’ */
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(224, 46, 36, 0.3);
            transition: all 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        button#generateBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(224, 46, 36, 0.4);
        }
        button#generateBtn:active { transform: scale(0.98); }
        button#generateBtn:disabled { background: #bdc3c7; cursor: not-allowed; box-shadow: none; }

        /* ç»“æœåŒºåŸŸ */
        .results-grid {
            display: none;
            margin-top: 40px;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .result-card {
            background: #fff;
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow-soft);
            border-top: 5px solid #eee;
        }
        /* é£æ ¼åŒ–é…è‰² */
        .card-traffic { border-top-color: #3498db; }
        .card-conv { border-top-color: #9b59b6; }
        .card-promo { border-top-color: var(--primary-red); }

        .card-head {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .card-icon { font-size: 22px; margin-right: 8px; }

        .title-row {
            padding: 15px;
            margin-bottom: 12px;
            background: #f8f9fa;
            border-radius: 10px;
            font-size: 16px;
            line-height: 1.5;
            cursor: pointer;
            border: 1px solid transparent;
            transition: 0.2s;
            position: relative;
        }
        .title-row:hover {
            background: #fff;
            border-color: var(--gold-accent);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transform: scale(1.01);
        }
        .title-row::after {
            content: 'å¤åˆ¶';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 12px;
            color: var(--primary-red);
            opacity: 0;
            transition: 0.2s;
            border: 1px solid var(--primary-red);
            padding: 2px 6px;
            border-radius: 4px;
        }
        .title-row:hover::after { opacity: 1; }

        /* åº•éƒ¨ */
        .footer {
            margin-top: 60px;
            text-align: center;
            color: #999;
            font-size: 13px;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loader-box {
            display: none;
            text-align: center;
            margin-top: 20px;
            color: var(--text-sub);
        }
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-red);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    </style>
</head>
<body>

<!-- åº•çº¹å±‚ -->
<div class="watermark-layer" id="bgWatermark"></div>

<div class="container">
    
    <!-- å¤´éƒ¨ï¼šå“ç‰Œä¸å“²æ€ -->
    <div class="header">
        <h1>å¾è¯¾é•¿ Â· AIçˆ†æ¬¾æ ‡é¢˜ç”Ÿæˆå™¨</h1>
        <div class="badges">
            <span class="badge gold">AIå•†ä¸šæ€ç»´é€»è¾‘</span>
            <span class="badge">ç®—æ³•æœºåˆ¶å¿ƒç†å­¦</span>
            <span class="badge">è§†è§‰ç¬¦å·å­¦</span>
            <span class="badge">äººæ€§æ·±åº¦åˆ†æ</span>
        </div>
    </div>

    <!-- API é…ç½®æŠ˜å é¢æ¿ -->
    <div class="config-wrap">
        <div class="config-header" onclick="toggleConfig()">
            <span>âš™ï¸ è¿æ¥ AI å¤§è„‘ (API Key è®¾ç½®)</span>
            <span>â–¼</span>
        </div>
        <div class="config-body" id="configBody">
            <input type="password" id="apiKey" class="config-input" placeholder="è¯·è¾“å…¥ API Key (OpenAI / DeepSeek / Moonshot)">
            <input type="text" id="apiUrl" class="config-input" value="https://api.openai.com/v1/chat/completions" placeholder="API Base URL">
            <input type="text" id="modelName" class="config-input" value="gpt-3.5-turbo" placeholder="æ¨¡å‹åç§°">
            <div style="font-size:12px; color:#999;">* è®¾ç½®ä¼šè‡ªåŠ¨ä¿å­˜ï¼Œæ•°æ®ä»…åœ¨æœ¬åœ°å¤„ç†ï¼Œå®‰å…¨æ— å¿§ã€‚</div>
        </div>
    </div>

    <!-- æ ¸å¿ƒæ“ä½œåŒºï¼šå·¨ç‰©åŒ–è®¾è®¡ -->
    <div class="main-card">
        <label class="input-label">ğŸ‘‡ è¾“å…¥äº§å“åç§°ï¼Œä¸€é”®ç”Ÿæˆçˆ†æ¬¾ï¼š</label>
        <textarea id="productInput" placeholder="ä¾‹å¦‚ï¼šé˜²æ™’è¡£ / æ‡’äººæŠ¹å¸ƒ / æ‰‹æœºæ”¯æ¶" onkeydown="if(event.ctrlKey && event.keyCode==13) startEngine()"></textarea>
        
        <button id="generateBtn" onclick="startEngine()">
            <span>ğŸš€</span> å¯åŠ¨ AI æ·±åº¦åˆ†æä¸ç”Ÿæˆ
        </button>

        <div class="loader-box" id="loader">
            <div class="spinner"></div>
            <div>AI æ­£åœ¨è§£æ„ç®—æ³•ä¸äººæ€§...</div>
        </div>
        <div id="errorMsg" style="color:red; text-align:center; margin-top:15px; display:none;"></div>
    </div>

    <!-- ç»“æœåŒºï¼šæ¸…æ™°åˆ†ç±» -->
    <div class="results-grid" id="resultArea">
        
        <!-- æµé‡å‹ -->
        <div class="result-card card-traffic">
            <div class="card-head">
                <span><span class="card-icon">ğŸŒŠ</span>ç®—æ³•å¼•æµå‹</span>
            </div>
            <div id="outTraffic"></div>
        </div>

        <!-- è½¬åŒ–å‹ -->
        <div class="result-card card-conv">
            <div class="card-head">
                <span><span class="card-icon">ğŸ§ </span>è®¤çŸ¥è½¬åŒ–å‹</span>
            </div>
            <div id="outConv"></div>
        </div>

        <!-- ä¿ƒé”€å‹ -->
        <div class="result-card card-promo">
            <div class="card-head">
                <span><span class="card-icon">ğŸ”¥</span>äººæ€§ä¿ƒé”€å‹</span>
            </div>
            <div id="outPromo"></div>
        </div>

    </div>

    <div class="footer">
        Â© å¾è¯¾é•¿AIæ•°å­—èµ„äº§å•†ä¸šè¿è¥ | èåˆç»ˆæç‰ˆ V6.0
    </div>
</div>

<script>
    window.onload = function() {
        // 1. ç”Ÿæˆå¾è¯¾é•¿ä¸“å±æ°´å°
        const watermarkContainer = document.getElementById('bgWatermark');
        const text = `
            å¾®ä¿¡å…¬ä¼—å·ï¼šå¾è¯¾é•¿     å¾®ä¿¡å·ï¼šXKZ201202<br>
            æ‰‹æœºå·ï¼š13683520302  å¾è¯¾é•¿AIæ•°å­—èµ„äº§å•†ä¸šè¿è¥
        `;
        // é“ºæ»¡å±å¹•
        for(let i=0; i<30; i++) {
            let div = document.createElement('div');
            div.className = 'watermark-item';
            div.innerHTML = text;
            watermarkContainer.appendChild(div);
        }

        // 2. åŠ è½½é…ç½®
        if(localStorage.getItem('xkz_key')) document.getElementById('apiKey').value = localStorage.getItem('xkz_key');
        if(localStorage.getItem('xkz_url')) document.getElementById('apiUrl').value = localStorage.getItem('xkz_url');
        if(localStorage.getItem('xkz_model')) document.getElementById('modelName').value = localStorage.getItem('xkz_model');
    }

    function toggleConfig() {
        const body = document.getElementById('configBody');
        body.style.display = body.style.display === 'block' ? 'none' : 'block';
    }

    async function startEngine() {
        const product = document.getElementById('productInput').value.trim();
        const apiKey = document.getElementById('apiKey').value.trim();
        const apiUrl = document.getElementById('apiUrl').value.trim();
        const modelName = document.getElementById('modelName').value.trim();

        const loader = document.getElementById('loader');
        const resultArea = document.getElementById('resultArea');
        const errorMsg = document.getElementById('errorMsg');
        const btn = document.getElementById('generateBtn');

        if (!product) { alert("âš ï¸ è¯·è¾“å…¥äº§å“åç§°"); return; }
        if (!apiKey) { 
            alert("âš ï¸ è¯·ç‚¹å‡»ä¸Šæ–¹è®¾ç½®æ ï¼Œå¡«å…¥æ‚¨çš„ API Key"); 
            toggleConfig();
            return; 
        }

        // ä¿å­˜ç”¨æˆ·ä¹ æƒ¯
        localStorage.setItem('xkz_key', apiKey);
        localStorage.setItem('xkz_url', apiUrl);
        localStorage.setItem('xkz_model', modelName);

        // UI çŠ¶æ€åˆ‡æ¢
        loader.style.display = 'block';
        resultArea.style.display = 'none';
        errorMsg.style.display = 'none';
        btn.disabled = true;
        btn.innerHTML = "AI æ­£åœ¨è¿ç®—ä¸­...";

        // å¾è¯¾é•¿æ ¸å¿ƒç®—æ³•æ€ç»´é“¾ Prompt
        const systemPrompt = `
ä½ æ˜¯ç”±â€œå¾è¯¾é•¿â€è®­ç»ƒçš„ç”µå•†æœç´¢ç®—æ³•ä¸“å®¶ã€‚
ä»»åŠ¡ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥çš„äº§å“ï¼Œç»“åˆã€AIå•†ä¸šæ€ç»´é€»è¾‘ã€‘ä¸ã€æ‹¼å¤šå¤šç®—æ³•æœºåˆ¶ã€‘ï¼Œç”Ÿæˆä¸‰ç»„çˆ†æ¬¾æ ‡é¢˜ã€‚

è¯·ä¸¥æ ¼æ‰§è¡Œä»¥ä¸‹ç­–ç•¥ï¼š
1. **Traffic (æµé‡)**ï¼šé¦–éƒ¨å¿…é¡»åŒ…å«æ ¸å¿ƒå¤§è¯ï¼Œåˆ©ç”¨ç®—æ³•æƒé‡ã€‚
2. **Conversion (è½¬åŒ–)**ï¼šåˆ©ç”¨è®¤çŸ¥å¿ƒç†å­¦ï¼Œå‡»ä¸­ç”¨æˆ·ç—›ç‚¹ã€‚
3. **Humanity (äººæ€§)**ï¼šåˆ©ç”¨è´ªå©ªä¸ç´§è¿«æ„Ÿï¼Œä½¿ç”¨ã€ã€‘ã€æ•°å­—ã€ä¿ƒé”€è¯ã€‚

è¯·ä»¥çº¯ JSON æ ¼å¼è¾“å‡ºï¼š
{
  "traffic": ["æ ‡é¢˜1", "æ ‡é¢˜2", "æ ‡é¢˜3"],
  "conversion": ["æ ‡é¢˜1", "æ ‡é¢˜2", "æ ‡é¢˜3"],
  "promo": ["æ ‡é¢˜1", "æ ‡é¢˜2", "æ ‡é¢˜3"]
}
        `.trim();

        try {
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: modelName,
                    messages: [
                        { role: "system", content: systemPrompt },
                        { role: "user", content: `äº§å“åç§°ï¼š${product}` }
                    ],
                    temperature: 0.8
                })
            });

            if (!response.ok) throw new Error("è¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ API Key");
            
            const data = await response.json();
            let content = data.choices[0].message.content;
            
            // ç®€å•çš„ JSON æ¸…æ´—
            content = content.replace(/```json/g, '').replace(/```/g, '').trim();
            const json = JSON.parse(content);

            // æ¸²æŸ“ç»“æœ
            renderGroup('outTraffic', json.traffic);
            renderGroup('outConv', json.conversion);
            renderGroup('outPromo', json.promo);

            resultArea.style.display = 'grid';

        } catch (e) {
            errorMsg.innerText = "ç”Ÿæˆå‡ºé”™ï¼š" + e.message;
            errorMsg.style.display = 'block';
        } finally {
            loader.style.display = 'none';
            btn.disabled = false;
            btn.innerHTML = "ğŸš€ å†æ¬¡ç”Ÿæˆ";
        }
    }

    function renderGroup(id, titles) {
        const container = document.getElementById(id);
        container.innerHTML = '';
        titles.forEach(t => {
            const div = document.createElement('div');
            div.className = 'title-row';
            div.innerText = t;
            div.onclick = () => {
                navigator.clipboard.writeText(t);
                alert("âœ… å¤åˆ¶æˆåŠŸï¼\n" + t);
            };
            container.appendChild(div);
        });
    }
</script>

</body>
</html>
